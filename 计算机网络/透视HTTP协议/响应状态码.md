# 响应状态码

[TOC]

## 状态码

十进制数字，以代码的形式表示服务器对请求的处理结果，表达HTTP数据处理的“状态”，客户端可以依据代码适时转换处理状态

- **分类**

  范围为100~599

  - **1xx**：提示信息，表示目前是协议处理的中间状态，还需要后续的操作
  - **2xx**：成功，报文已经收到并被正确处理
  - **3xx**：重定向，资源位置发生变动，需要客户端重新发送请求
  - **4xx**：客户端错误，请求报文有误，服务器无法处理
  - **5xx**：服务器错误，服务器在处理请求时内部发生了错误



## 1xx

提示信息，协议处理的中间状态，实际能够用到的时候很少

- **101 Switching Protocols**

  客户端使用Upgrade头字段，要求在HTTP协议的基础上改成其他的协议继续通信



## 2xx

表示服务器收到并成功处理了客户端的请求

- **200 OK**

  最常见的成功状态码，表示一切正常，服务器如客户端所期望的那样返回了处理结果，如果是非HEAD请求，通常在响应头后都会有body数据

- **204 No Content**

  另一个很常见的成功状态码，含义与“200 OK”基本相同，但**响应头后没有body数据**

- **206 Partial Content**

  是HTTP分块下载或断点续传的基础，在客户端发送“范围请求”，**要求获取资源的部分数据时出现**，与200一样，也是服务器成功处理了请求，但body里的数据不是资源的全部而是其中的一部分

  通常伴随着头字段“Content-Range”，表示响应报文里body数据的具体范围，供客户端确认



## 3xx

表示客户端请求的资源发生了变动，客户端必须用新的URI重新发送请求获取资源，即重定向

- **301 Moved Permanently**

  永久重定向，指此次请求的资源已经不存在了，需要改用新的URI再次访问

- **302 Found**

  临时重定向，指请求的资源还在，需要暂时用另一个URI来访问

   *301和302都会在响应头里使用字段**Location**指明后续要跳转的URI

- **304 Not Modified**

  表示资源未修改，用于缓存控制，它不具有通常的跳转含义，但可以理解成“重定向已到缓存的文件”（缓存重定向）



## 4xx

表示客户端发送的请求报文有误，服务器无法处理

- **400 Bad Request**

  表示请求报文有错误，但这是一个笼统的错误，没有具体说明是什么错误，所以要尽量避免给客户端返回400

- **403 Forbidden**

  表示服务器禁止访问资源，原因有信息敏感、法律禁止等

- **404 Not Found**

  资源在本服务器上未找到，所以无法提供给客户端

其他的一些代码较明确地说明了错误的原因：

- **405 Method Not Allowed**：不允许使用某些方法操作资源，例如不允许 POST 只能 GET
- **406 Not Acceptable**：资源无法满足客户端请求的条件，例如请求中文但只有英文
- **408 Request Timeout**：请求超时，服务器等待了过长的时间
- **409 Conflict**：多个请求发生了冲突，可以理解为多线程并发时的竞态
- **413 Request Entity Too Large**：请求报文里的 body 太大
- **414 Request-URI Too Long**：请求行里的 URI 太大
- **429 Too Many Requests**：客户端发送了太多的请求，通常是由于服务器的限连策略
- **431 Request Header Fields Too Large**：请求头某个字段或总体太大



## 5xx

表示客户端请求报文正确，但服务器在处理时内部发生了错误，无法返回应有的响应数据

- **500 Internal Server Error**

  一个通用的错误码，无法得知服务器究竟发生了什么错误。但通常不应该把服务器内部的详细信息告诉外界。虽然不利于调试，但能够防止黑客的窥探或者分析

- **501 Not Implemented**

  表示客户端请求的功能还不支持

- **502 Bad Gateway**

  常是服务器作为网关或者代理时返回的错误码，表示服务器自身工作正常，但访问后端服务器

  时发生了错误

- **503 Service Unavailable**

  表示服务器当前很忙，暂时无法响应服务

  503 是一个“临时”的状态，可能过几秒钟后服务器就不忙了，可以继续提供服务，所以 503 响应报文里通常

  还会有一个“**Retry-After**”字段，指示客户端可以在多久以后再次尝试发送请求