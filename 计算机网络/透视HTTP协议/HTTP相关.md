# HTTP相关

[TOC]

## HTTP相关应用技术

<img src="F:\前端笔记\studyNote\images\HTTP相关.jpg" alt="HTTP相关" style="zoom:33%;" />

- **浏览器**

  - 正式名字叫“Web Browser”，即检索、查看互联网上网页资源的应用程序，Web即万维网

  - 浏览器本质上是一个HTTP协议中的**请求方**，使用HTTP协议获取网络上的各种资源

  - 在HTTP协议中浏览器的角色被称为“用户代理”，作为访问者的“代理”来发起HTTP请求，也称它为客户端

- **Web服务器**

  服务器又称为Web Server，在协议的另一端作为**应答方**。它是HTTP协议里响应请求的主体，通常把控着绝大多数的网络资源，在网络世界里处于强势地位

  - **Web服务器有两层含义**：

    - **硬件**

      物理形式或“云”形式的机器，在大多数情况下它可能不是一台服务器，而是利用反向代理、负载均衡等技术组成的庞大集群，但从外界看来它仍然表现为一台机器，但这个形象是虚拟的

    - **软件**

      它提供Web服务的应用程序，通常会运行在硬件含义的服务器上，它利用强大的硬件能力响应海量的客户端HTTP请求，处理磁盘上的网页、图片等静态文件，或者把请求转发给后面的Tomcat、Node.js等业务应用，返回动态的信息

  - **服务器**

    有Apache、Nginx等

- **CDN**

  CDN位于浏览器和服务器这两个HTTP端点之间，应用了HTTP协议里的缓存和代理技术，代替源站响应客户端的请求

  - **好处**

    可以缓存源站的数据，让浏览器的请求不用千里迢迢地到达源站服务器，直接在半路就可以获取响应。如果CDN的调度算法很优秀，更可以找到里用户最近的节点，大幅度缩短响应时间

- **爬虫**

  爬虫即是一种**可以自动访问Web资源的应用程序**。爬虫绝大多数是由各大搜索引擎放出来的，抓取网页存入庞大的数据库，再建立关键字索引，这样才能在搜索引擎中快速地搜索到互联网里的网页

  - **缺点**

    过度消耗网络资源，占用服务器的带宽，影响网站对真实数据的分析，甚至导致敏感信息泄露

  - **反爬虫**

    针对爬虫的缺点出现的反爬虫技术，通过各种手段来限制爬虫。其中一项就是“君子协议” robots.txt，约定哪些该爬哪些不该爬

- **HTML/WebService/WAF**

  - **HTML**

  - **Web Service**

    一种由W3C定义的应用服务开发规范，使用client-server主从架构，通常使用WSDL定义服务接口，使用HTTP协议传输XML或SOAP消息，它是**一个基于Web(HTTP)的服务架构技术**，既可以运行在内网也可以在适当保护后运行在外网

    - **优点**

      因为采用了HTTP协议传输数据，所以在Web Service架构里服务器和客户端可以采用不同的操作系统或编程语言开发，具有跨平台跨语言的优点

  - **WAF**

    **网络应用防火墙**，与硬件防火墙类似，它是应用层面的防火墙，专门检测HTTP流量，是防护Web应用的安全技术

    WAF通常位于Web服务器之前，可以组织如SQL注入、跨站脚本等攻击



## HTTP相关协议

<img src="F:\前端笔记\studyNote\images\HTTP相关协议.jpg" alt="HTTP相关协议" style="zoom:33%;" />

- **TCP/IP**

  TCP/IP协议是目前网络世界事实上的标准通信协议，是一系列网络通信协议的统称，其中**最核心的两个协议是TCP和IP**，其他的还有UDP、ICMP、ARP等，**共同构成了一个复杂但有层次的协议栈**

  - **协议栈**

    有四层

    - **最上层：应用层**

    - **最下层：链接层**

    - **中间层：TCP传输层**

      **传输控制协议**。位于IP协议之上，基于IP协议提供可靠的、字节流形式的通信，是HTTP协议得以实现的基础。可靠指保证数据不丢失，字节流指保证数据完整，所以在TCP协议的两端可以如同操作文件一样访问传输的数据，就像是读写在一个密闭的管道里流动的字节

    - **中间层：IP网络层**

      **解决寻址和路由问题，在两点间传送数据包**。IP协议使用IP地址来定位互联网上的每一台计算机

  - **与HTTP关系**

    HTTP是一个传输协议，寻址、路由、数据完整性等传输细节由下层来处理，因此HTTP协议就运行在TCP/IP协议上

- **DNS**

  在TCP/IP协议中使用IP地址以数字形式来标识计算机，DNS**域名系统**用有意义的名字来作为IP地址的等价替代，方便人类记忆

  - **域名是一个有层次的结构**

    域名又称为**主机名**，为了更好的标记不同国家或组织的主机，所以被设计成一个有层次的结构。域名用“.”分隔成多个单词，级别从左到右逐级升高

    - 最右边为顶级域名

      例如标识号商业公司的“com”、表示教育机构的“edu”、表示国家的“cn” “uk”等

  - **域名解析**

    想要使用TCP/IP协议来通信依然要用IP地址，所以需要把域名做一个转换，映射到它的真实IP地址

  - **与HTTP关系**

    HTTP协议中没有明确要求必须使用DNS，但实际上为了方便访问互联网上的Web服务器，通常都会使用DNS来定位或标记主机名，间接地把DNS与HTTP绑在一起

- **URI/URL**

  - **URI**

    **统一资源标识符**，唯一地标记互联网上的资源，有三个基本部分：

    - **协议名**：即访问该资源应当使用的协议，即http或https等
    - **主机名**：互联网上主机的标记，可以是域名或IP地址
    - **路径**：即资源在主机上的位置，使用“/”分隔多级目录

  - **URL**

    **统一资源定位符**，即俗称的网址，是URI的一个子集，不过因为两者几乎相同差异不大，所以通常不会做严格的区分

- **HTTPS**

  运行在SSL/TLS协议上的HTTP。SSL/TLS是一个负责加密通信的安全协议，建立在TCP/IP上，是个可靠的传输协议，可以被用作HTTP的下层

- **代理**

  代理（Proxy）是HTTP协议中请求方和应答方中间的一个环节，作为“中转站”，既可以转发客户端的请求，也可以转发服务器的应答

  - **代理种类**

    - **匿名代理**：完全隐匿了被代理的机器，外界看到的只是代理服务器
    - **透明代理**：它在传输过程中是透明开放的，外界既知道代理也知道客户端
    - **正向代理**：靠近客户端，代表客户端向服务器发送请求
    - **反向代理**：靠近服务器，代表服务器响应客户端的请求

    *CDN即一种代理，它代替源站服务器响应客户端的请求，通常扮演透明代理和反向代理的角色

  - **代理功能**

    由于代理在传输过程中插入了一个中间层，所以可以在这个环节实现很多事情

    - **负载均衡**：把访问请求均匀分散到多台机器，实现访问集群化
    - **内容缓存**：暂存上下行的数据，减轻后端的压力
    - **安全防护**：隐匿IP，使用WAF等工具抵御网络攻击，保护被代理的机器
    - **数据处理**：提供压缩、加密等额外的功能