# 滑动窗口最大值

[TOC]

## 题目

给定一个数组和滑动窗口的大小，找出所有滑动窗口里数值的最大值

例如，如果输入数组{2,3,4,2,6,2,5,1}及滑动窗口的大小3，那么一共存在6个滑动窗口，他们的最大值分别为{4,4,6,6,6,5}

 针对数组{2,3,4,2,6,2,5,1}的滑动窗口有以下6个： {[2,3,4],2,6,2,5,1}， {2,[3,4,2],6,2,5,1}， {2,3,[4,2,6],2,5,1}， {2,3,4,[2,6,2],5,1}， {2,3,4,2,[6,2,5],1}， {2,3,4,2,6,[2,5,1]}

窗口大于数组长度的时候，返回空



## 示例

- **输入**

  [2,3,4,2,6,2,5,1],3

- **返回值**

  [4,4,6,6,6,5]



## 解法

- **单调队列法**

  - **思路**

    1. 遍历数组的每一个元素
    2. 如果容器为空，则直接将当前元素下标加入到容器中
    3. 如果容器不为空，则让当前元素和容器的最后一个元素比较，如果大于，则将容器的最后一个元素删除，然后继续比较当前元素和容器的最后一个元素
    4. 如果当前元素小于容器的最后一个元素，则直接将当前元素下标加入到容器的末尾
    5. 如果容器头部的元素已经不属于当前窗口的边界，则应该将头部元素删除

    **注意**：容器中存储的元素下标对应的元素是单调递减的

  - **代码**

    ```javascript
    function maxInWindows(num, size)
    {
        // write code here
        if(size < 1 || size > num.length)
            return [];
        var res = [];
        var queue = [];  //双头队列，存储元素下标
        var begin;  //窗口左边界
        //滑动从只有数组第一格占窗口最后一格开始
        for(let i = 0; i < num.length; i++){  //i可以看做窗口最后一个下标
            begin = i - size + 1;  //左边界
            while(queue.length && num[queue[queue.length-1]] < num[i])
                queue.pop();
            queue.push(i);
            //判断头元素是否超出窗口
            if(queue[0] < begin)
                queue.shift();
            //数组完全进入窗口
            if(begin >= 0)
                res.push(num[queue[0]]);
        }
        return res;
    }
    ```

  